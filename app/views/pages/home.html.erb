<nav class="navbar navbar-expand-lg" style="background-color: #FF5A5F;">
  <div class="container-fluid">
    
    <%= link_to "Rent Your Family", root_path, class: "navbar-brand text-white fw-bold" %>

    <div class="ms-auto d-flex gap-2">
      <% if user_signed_in? %>
          <% if current_user.role == "provider"%>
        <%= link_to "Dashboard", providers_path, class: "btn btn-light fw-semibold text-danger" %>
          <% end %>
           <% if current_user.role == "guest"%>
        <%= link_to "Dashboard", guests_path, class: "btn btn-light fw-semibold text-danger" %>
          <% end %>
          <%= link_to "Logout", destroy_user_session_path, method: :delete, data: { turbo_method: :delete }, class: "btn btn-light fw-semibold text-danger" %>
      <% else %>
        <%= link_to "Login", new_user_session_path, class: "btn btn-light fw-semibold text-danger" %>
        <%= link_to "Register Your Family", new_provider_path, class: "btn btn-light fw-semibold text-danger" %>
      <% end %>
    </div>
  </div>
</nav>



<div class="container-fluid mt-4">
  <h1 class="d-flex justify-content-center gap-2"> <img src="<%= asset_path('family.png') %>" alt="family" style="height: 40px;">Families</h1>

  <div class="rounded-3 border border-2 p-10 w-100 mt-4 shadow-sm bg-white">
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 m-4">
  <% @families.each do |family| %>
    <div class="col">
      <div class="card h-100 shadow-sm">
        <%= image_tag "https://image.pollinations.ai/prompt/japanese_family_called_#{family.members}", alt: "Random family", class: "card-img-top", style: "object-fit: cover; height: 200px;" %>
        <div class="card-body">
          <h5 class="card-title fw-bold"><%= link_to family.members, family_path(family), class: "text-decoration-none text-dark" %></h5>

          <!-- Rating -->
          <% if family.rating? %>
            <h6 class="d-flex justify-content-end"> <%= '🌟' * family.rating.to_i %> (<%= family.rating %>) </h6>
          <% else %>
            <p class="d-flex justify-content-end">Newly Registered!</p>  
          <% end %>  
          
            <!-- Location -->
          <p class="mb-2 text-muted"><strong>📍 Location:</strong> <span class="text-dark"><%= family.location %></span></p>

          <!-- Event type -->
          <p class="mb-2 text-muted"><strong>📅 Available for:</strong> <span class="text-dark"><%= family.event_type %></span></p>

          <!-- Rate -->
          <p class="mb-4 text-muted"><strong>💴 Hourly Rate:</strong> <span class="text-dark">¥<%= family.hourly_rate %></span></p>

        </div>
      </div>
    </div>
  <% end %>
</div>

  </div>
</div>
